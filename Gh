def extract_scores_and_feedback(feedback_text):
    """
    Extract structured feedback from LLM output and clean up formatting.
    Handles cases where the response is wrapped in triple backticks.
    """
    try:
        # Clean the feedback text to remove backticks and extra formatting
        if feedback_text.startswith("```json") and feedback_text.endswith("```"):
            feedback_text = feedback_text[7:-3].strip()  # Remove ```json and ```
        
        # Convert the cleaned JSON string into a Python dictionary
        parsed_feedback = eval(feedback_text)
        return parsed_feedback

    except Exception as e:
        print(f"Error parsing feedback: {e}")
        return {}
